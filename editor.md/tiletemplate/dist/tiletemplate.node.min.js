/*! tileTemplate v1.6.0 | Copyright (c) 2016 Pandao | https://github.com/pandao/tileTemplate | 2016-12-04 15:02:47 */
"use strict";var tileTemplate=require("./tiletemplate");tileTemplate.config({ext:"tile.html",basePath:"./"}),tileTemplate.readFile=function(e,t){t=t||"utf-8";var i=require("fs"),s=this.settings.basePath,n="."+this.settings.ext;e=s+e+n;var a=!!i.existsSync(e)&&i.readFileSync(e,t);return a},tileTemplate.compileInclude=function(e,t,i){e=e||"",i=i||"utf-8";var s=this,n=this.settings.openTag,a=this.settings.closeTag,r=this.settings.basePath;return function(e,l,u){var o=(new Date).getTime(),c=l.replace("('","").replace("')","").replace('("',"").replace('")',""),p=s.readFile(c,i),h=s.compile(p,t,{include:!0,name:r+c}).toString().split("\n").join("");return h=h.replace("anonymous","anonymous"+o),h+=' if (typeof __data__ !== "undefined") { __out__ += anonymous'+o+"(__data__); }",n+" "+h+" "+a}},tileTemplate.render=function(e,t,i,s){"undefined"==typeof i&&(i=!1),e=e||"",s=s||"utf-8";var n=require("fs"),a=this.caches,r=this.settings.cached,l=this.settings.basePath,u="."+this.settings.ext,o=n.existsSync(l+e+u)?n.readFileSync(l+e+u,s):e;if(n.existsSync(l+e+u)&&(e=l+e+u),r&&"undefined"!=typeof a[e])return a[e];var c=this.compile(o,t,{name:e,isModule:i});return c=i?c:c(t),r&&(a[e]=c),c},tileTemplate.__express=function(e,t,i){var s=require("fs");s.readFile(e,function(e,s){if(e)throw new Error(e);var n=tileTemplate.render(s.toString(),t);return i(null,n)})},tileTemplate.expressInit=function(e,t,i){this.config({basePath:t||"./",ext:i||"tile.html"}),i=this.settings.ext,e.set("views",this.settings.basePath),e.engine(i,this.__express),e.set("view engine",i)},module.exports=tileTemplate;